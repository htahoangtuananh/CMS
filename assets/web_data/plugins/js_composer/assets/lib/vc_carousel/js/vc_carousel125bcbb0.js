(function(b){function c(e,d){this.$element=b(e);this.$indicators=this.$element.find(".vc_carousel-indicators");this.options=d;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"===this.options.pause&&this.$element.on("mouseenter",b.proxy(this.pause,this)).on("mouseleave",b.proxy(this.cycle,this));this._build()}c.DEFAULTS={mode:"horizontal",partial:false,interval:5000,pause:"hover",wrap:false,autoHeight:false,perView:1};c.prototype.cycle=function(d){d||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(b.proxy(this.next,this),this.options.interval));this.touch_start_position=0;return this};c.prototype.getActiveIndex=function(){this.$active=this.$element.find(".vc_item.vc_active");if(!this.$active.length){this.$active=this.$element.find(".vc_item:first").addClass("vc_active")}this.$items=this.$active.parent().children();return this.$items.index(this.$active)};c.prototype.showHideControl=function(d){if("undefined"===typeof(d)){var d=this.getActiveIndex()}this.$left_control[0===d?"hide":"show"]();this.$right_control[d===this.items_count-1?"hide":"show"]()};c.prototype.to=function(f){var e=this;var d=this.getActiveIndex();if(f>(this.$items.length-1)||0>f){return}if(this.sliding){return this.$element.one("slid",function(){e.to(f)})}if(d==f){return this.pause().cycle()}return this.slide(f>d?"next":"prev",b(this.$items[f]))};c.prototype.pause=function(d){d||(this.paused=true);if(this.$element.find(".vc_right.vc_carousel-control, .vc_left.vc_carousel-control").length&&b.support.transition.end){this.$element.trigger(b.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};c.prototype.next=function(){if(this.sliding){return}return this.slide("next")};c.prototype.prev=function(){if(this.sliding){return}return this.slide("prev")};c.prototype.slide=function(k,f){var m=this.$element.find(".vc_item.vc_active");var d=f||m[k]();var j=this.interval;var l="next"===k?"vc_left":"vc_right";var g="next"===k?"first":"last";var h=this;if(!d.length){if(!this.options.wrap){this.returnSwipedSlide();return}d=this.$element.find(".vc_item")[g]()}this.sliding=true;j&&this.pause();var i=b.Event("slide.vc.carousel",{relatedTarget:d[0],direction:l});if(d.hasClass("vc_active")){return}if(this.$indicators.length){this.$indicators.find(".vc_active").removeClass("vc_active");this.$indicators.find(".vc_partial").removeClass("vc_partial");this.$element.one("slid",function(){var e=h.getActiveIndex(),n=b(h.$indicators.children().slice(e,h.getActiveIndex()+h.options.perView));n&&n.addClass("vc_active");h.options.partial&&n&&(e+1<h.items_count?n.last().next().addClass("vc_partial"):n.first().prev().addClass("vc_partial"));!h.options.wrap&&h.showHideControl(e)})}this.current_index=d.index();if(this.current_index>this.items_count){this.current_index=0}else{if(0>this.current_index){this.current_index=this.items_count-1}}if(this.options.autoHeight){this.current_pos_value=-1*this._step*this.current_index}else{this.current_pos_value=-1*d.position()[this.animation_position]}if(this.options.partial&&this.current_index>=this.items_count-1){this.current_pos_value+=this._step*(1-this.partial_part)}if(b.support.transition&&this.$element.hasClass("vc_slide")){this.$element.trigger(i);if(i.isDefaultPrevented()){return}this.$slideline_inner.addClass("vc_transition").css(this.animation_position,this.current_pos_value+h.pos_units);if(!this.options.autoHeight){this.recalculateSlidelineHeight(d.height(),true)}this.$slideline_inner.one(b.support.transition.end,function(){d.addClass("vc_active");m.removeClass("vc_active");h.$slideline_inner.removeClass([k,"vc_transition"].join(" "));h.sliding=false;h.removeSwipeAnimationSpeed();setTimeout(function(){h.$element.trigger("slid")},0)}).emulateTransitionEnd(this.transition_speed)}else{this.$element.trigger(i);if(i.isDefaultPrevented()){return}m.removeClass("vc_active");d.addClass("vc_active");this.sliding=false;this.$slideline_inner.css(this.animation_position,this.current_pos_value+h.pos_units)}j&&this.cycle();return this};c.prototype.setSwipeAnimationSpeed=function(){this.$slideline_inner.addClass("vc_swipe-transition")};c.prototype.removeSwipeAnimationSpeed=function(){this.$slideline_inner.removeClass("vc_swipe-transition")};c.prototype.velocity=function(e,d){return{x:Math.abs(d/e)||0}};c.prototype.recalculateSlidelineHeight=function(d,e){if(true===e){this.$slideline.animate({height:d})}else{this.$slideline.height(d)}};c.prototype.resizeAction=function(){var e=0,d=0;if("horizontal"===this.options.mode){this.el_effect_size=this.$element.width()*(this.options.partial?this.partial_part:1);this.$slideline.width(this.items_count*this.el_effect_size)}if(this.options.autoHeight){this.$items.height("auto");this.$items.each(function(){var f=b(this).height();if(f>e){e=f}});this.$items.height(e)}else{this.recalculateSlidelineHeight(this.$active.height())}if("vertical"===this.options.mode){this._step=this.$active.height();d=this.$active.height()*this.options.perView*(this.options.partial?(1+1-this.partial_part):1);this.recalculateSlidelineHeight(d,false);this.$slideline_inner.css({top:-1*this.$active.position().top});this.el_effect_size=this._step}};c.prototype.returnSwipedSlide=function(){var d={};d[this.animation_position]=this.current_pos_value+this.pos_units;this.$slideline_inner.animate(d)};c.prototype._build=function(){var e=this.$element.get(0),j=false,l=0,k=0,g=0,i=false,h=this,f=this.options.mode;this.getActiveIndex();this.el_width=0;this.items_count=this.$items.length;this.$slideline=this.$element.find(".vc_carousel-slideline");this.$slideline_inner=this.$slideline.find("> div");this.slideline_inner=this.$slideline_inner.get(0);this.partial_part=0.8;this._slide_width=0;this.swipe_velocity=0.7;this.current_pos_value=0;this.current_index=0;this.el_effect_size=0;this.transition_speed=600;this.$left_control=this.$element.find(".vc_left.vc_carousel-control");this.$right_control=this.$element.find(".vc_right.vc_carousel-control");if(this.options.partial){this.options.autoHeight=true}if(1<this.options.perView){this.$element.addClass("vc_per-view-more vc_per-view-"+this.options.perView)}if("horizontal"===f){this.pos_units="%";this._step=100/this.items_count/this.options.perView;this.animation_position="left";this.$items.width(this._step+this.pos_units);this.touch_direction="pageX"}else{this.pos_units="px";this.animation_position="top";this.touch_direction="pageY";this.$element.addClass("vc_carousel_vertical")}!h.options.wrap&&this.showHideControl();if(this.options.partial){this.$element.addClass("vc_partial")}if(this.$indicators.length){var d=h.$indicators.children().slice(this.current_index,this.current_index+this.options.perView).addClass("vc_active");this.options.partial&&d.last().next().addClass("vc_partial")}b(window).resize(this.resizeAction.bind(this));this.resizeAction();e.addEventListener("touchstart",function(m){j=parseFloat(m[h.touch_direction]);l=m.timeStamp;k=h.$slideline_inner.position()[h.animation_position]}.bind(this),false);e.addEventListener("touchmove",function(m){g=parseFloat(m[h.touch_direction])-j;i=0<Math.abs(g);if(!i){return true}m.preventDefault();h.slideline_inner.style[h.animation_position]=(k+g)+"px"},false);e.addEventListener("touchend",function(p){var o,m,n;if(i){o=(p.timeStamp-l)/1000;m=g/h.el_effect_size;n=h.velocity(o,m);if((n.x>h.swipe_velocity&&0>m)||m<=-0.7){h.setSwipeAnimationSpeed();h.next()}else{if(n.x>h.swipe_velocity||0.7<=m){h.setSwipeAnimationSpeed();h.prev()}else{h.returnSwipedSlide()}}i=false}},false);this.$element.addClass("vc_build");return this};var a=b.fn.carousel;b.fn.carousel=function(d,e){return this.each(function(){var i=b(this);var h=i.data("vc.carousel");var f=b.extend({},c.DEFAULTS,i.data(),"object"===typeof(d)&&d);var g="string"===typeof(d)?d:f.slide;if(!h){i.data("vc.carousel",(h=new c(this,f)))}if("number"===typeof(d)){h.to(d)}else{if(g){h[g](e)}else{if(f.interval){h.pause().cycle()}}}})};b.fn.carousel.Constructor=c;b.fn.carousel.noConflict=function(){b.fn.carousel=a;return this};b(document).off("click.vc.carousel.data-api").on("click.vc.carousel.data-api","[data-slide], [data-slide-to]",function(j){var i=b(this),f;var d=b(i.attr("data-target")||(f=i.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,""));var g=b.extend({},d.data(),i.data());var h=i.attr("data-slide-to");if(h){g.interval=false}d.carousel(g);if(h=i.attr("data-slide-to")){d.data("vc.carousel").to(h)}j.preventDefault()});b(window).on("load",function(){b('[data-ride="vc_carousel"]').each(function(){var d=b(this);d.carousel(d.data())})})})(window.jQuery);